[![Release](https://img.shields.io/badge/release-v1.0.0-blue)](https://github.com/krukkeniels/ai-box/releases/tag/v1.0.0)
[![Go](https://img.shields.io/badge/go-1.24-00ADD8)](https://go.dev)
[![Tests](https://img.shields.io/badge/tests-635+-success)](https://github.com/krukkeniels/ai-box)
[![License](https://img.shields.io/badge/license-Apache%202.0-orange)](LICENSE)

# AI-Box

**Secure sandbox for AI coding agents. Default-deny networking, policy-as-code, tool-agnostic.**

## The problem

AI coding agents need full access to source code to be useful -- but that same access enables code exfiltration through prompt injection, supply chain attacks, or misconfigured endpoints. Telling 200 engineers to "be careful" doesn't produce auditable compliance. AI-Box is the platform-level answer: let developers use any AI tool they want, inside a container that enforces what leaves the network.

## Install

```bash
# Script
curl -fsSL https://raw.githubusercontent.com/krukkeniels/ai-box/main/scripts/install.sh | bash

# Homebrew
brew install krukkeniels/aibox/aibox

# Build from source
git clone https://github.com/krukkeniels/ai-box.git && cd ai-box && make install
```

See [docs/installation.md](docs/installation.md) for all methods, post-install setup, and troubleshooting.

## Quick start

```bash
aibox setup                              # One-time host setup
aibox start --workspace ~/my-project     # Start sandbox
aibox shell                              # Open terminal inside
aibox stop                               # Stop and revoke credentials
```

## Architecture

```
┌─ Developer Machine ──────────────────────────────┐
│                                                   │
│  IDE ──SSH──▶ ┌─ Sandbox (Podman + gVisor) ────┐ │
│               │                                 │ │
│               │  AI Agent ──▶ LLM Proxy ────────┼─┼──▶ LLM API
│               │  Dev Tools   (key injection)    │ │    (allowlisted)
│               │  /workspace  (your code here)   │ │
│               │                                 │ │
│               │  Seccomp │ AppArmor │ rootless  │ │
│               └─────────────────────────────────┘ │
│                         │                         │
│  Network: Squid proxy ◀─┘  (default-deny egress) │
│  DNS: CoreDNS (allowlist-only)                    │
│  Policy: OPA/Rego (tighten-only hierarchy)        │
└───────────────────────────────────────────────────┘
```

## What it does

- **Default-deny networking** -- only allowlisted domains are reachable (Squid + nftables + CoreDNS)
- **gVisor kernel isolation** -- user-space syscall interception, host kernel never directly exposed
- **Policy-as-code** -- OPA/Rego with org > team > project hierarchy (tighten-only)
- **10 tool packs** -- Java, Node, Python, .NET, Bazel, Scala, Angular, PowerShell, and more
- **Credential injection** -- API keys auto-injected on start, auto-revoked on stop
- **Audit trail** -- 25 event types, hash-chain integrity, Falco eBPF detection, SIEM integration

## Configuration

Config lives at `~/.config/aibox/config.yaml`. Generated by `aibox setup`:

```yaml
runtime: podman
image: ghcr.io/krukkeniels/aibox/base:24.04
gvisor:
  enabled: true
resources:
  cpus: 4
  memory: 8g
network:
  enabled: true
  allowed_domains: [harbor.internal, git.internal]
```

All settings can be overridden with `AIBOX_` environment variables. See [docs/configuration.md](docs/configuration.md) for all options.

## Documentation

| Document | Description |
|----------|-------------|
| [Installation](docs/installation.md) | All install methods, post-install, troubleshooting |
| [Configuration](docs/configuration.md) | All config options and environment variables |
| [Contributing](docs/contributing.md) | Development setup, testing, project structure |
| [Specification](SPEC-FINAL.md) | Full specification v1.1 -- architecture, threat model, API |
| [Audit Operations](docs/audit-operations-guide.md) | Audit ops guide with SIEM integration for 5 platforms |
| [Operations](docs/operations/) | Runbooks, DR, monitoring, alerting |
| [Training](docs/training/) | IDE quickstarts, FAQ, toolpack authoring |
| [Migration](docs/migration/) | Stack-specific migration checklists |
| [Phase Plans](docs/plan/) | Implementation plans (Phase 0 through Phase 8) |

## License

Apache 2.0 -- see [LICENSE](LICENSE).
